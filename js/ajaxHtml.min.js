(function(a){a.fn.ajaxHtml=function(d){var h={loader:"#ajaxHtml",menuBtn:"a"};opts=a.extend(h,d);var g=a(opts.loader);var b=this.find(opts.menuBtn);var c=b.eq(0).attr("href");var f=c.slice(0,c.length-5);b.bind("click",function(){b.removeClass("hover");a(this).addClass("hover");var i=a(this).attr("href");g.html("正在加载页面...");g.load(i+" #page",function(m,k,n){if(k=="error"){g.html("页面不存在");}if(k=="timeout"){g.html("请求超时，请重新检查网络。");}var l=window.location.href;var j=l.split("?");window.history.pushState("","",j[0]+"?"+i.slice(0,i.length-5));});return false;});function e(){var j=window.location.href;var i=j.split("?");if(!i[1]){i[1]=f;}g.html("正在加载页面...");g.load(i[1]+".html #page",function(l,k,m){if(k=="error"){g.html("页面不存在");}if(k=="timeout"){g.html("请求超时，请重新检查网络。");}});b.each(function(l,m){var k=a(this).attr("href");k=k.slice(0,k.length-5);if(k==i[1]){b.removeClass("hover");a(this).addClass("hover");}});}e();window.onpopstate=function(){e();};};})(jQuery);